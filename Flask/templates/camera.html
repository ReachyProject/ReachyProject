<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reachy Camera Feed</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Reachy Logo" class="nav-logo">
            <span class="nav-title">Reachy Control Panel</span>
        </div>
        <div class="nav-links">
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
                <span class="theme-icon">ðŸŒ™</span>
            </button>
            <a href="/" class="nav-link">Configuration</a>
            <a href="/logs" class="nav-link">Logs</a>
            <a href="/movement-recorder" class="nav-link">Movement Recorder</a>
            <a href="/camera" class="nav-link active">Camera</a>
        </div>
    </nav>

    <div class="logs-container">
        <div class="logs-header">
            <h2>Live Camera Feed</h2>
            <div class="logs-controls">
                <span id="camera-status" class="status status-stopped">Checking...</span>
                <button class="btn-refresh" onclick="refreshCamera()">ðŸ”„ Refresh</button>
            </div>
        </div>

        <div class="camera-feed-wrapper">
            <div class="camera-container">
                <img id="camera-feed" 
                     src="/api/camera/feed" 
                     alt="Camera feed"
                     onerror="handleCameraError()">
            </div>

            <div id="metadata-panel" class="metadata-panel">
                <h3>Tracking Information</h3>
                <div class="metadata-grid">
                    <div class="metadata-item">
                        <div class="metadata-label">Face Detected</div>
                        <div id="meta-face" class="metadata-value">-</div>
                    </div>
                    <div class="metadata-item">
                        <div class="metadata-label">Tracking State</div>
                        <div id="meta-tracking" class="metadata-value">-</div>
                    </div>
                    <div class="metadata-item">
                        <div class="metadata-label">Head Pan</div>
                        <div id="meta-pan" class="metadata-value">-</div>
                    </div>
                    <div class="metadata-item">
                        <div class="metadata-label">Head Roll</div>
                        <div id="meta-roll" class="metadata-value">-</div>
                    </div>
                    <div class="metadata-item">
                        <div class="metadata-label">Head Pitch</div>
                        <div id="meta-pitch" class="metadata-value">-</div>
                    </div>
                    <div class="metadata-item">
                        <div class="metadata-label">Antenna Mode</div>
                        <div id="meta-antenna" class="metadata-value">-</div>
                    </div>
                </div>
            </div>

            <button class="btn-toggle-metadata" onclick="toggleMetadata()">
                ðŸ“Š Toggle Metadata
            </button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='camera.js') }}"></script>
</body>
</html>